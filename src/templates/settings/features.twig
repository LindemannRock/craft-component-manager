{% extends "component-manager/_layouts/settings" %}
{% set title = "Features"|t('component-manager') %}
{% set fullPageForm = true %}
{% set selectedSettingsItem = 'features' %}

{% set crumbs = [
    {
        label: pluginName ?? 'Component Manager',
        url: url('component-manager'),
    },
    {
        label: 'Settings'|t('component-manager'),
        url: url('component-manager/settings'),
    },
    {
        label: 'Features'|t('component-manager'),
        url: url('component-manager/settings/features'),
    },
] %}

{% import "_includes/forms" as forms %}

{% block content %}
    <h2>{{ 'Features'|t('component-manager') }}</h2>
    
    <form method="post" accept-charset="UTF-8">
        {{ csrfInput() }}
        {{ actionInput('component-manager/settings/save') }}
        {{ redirectInput('component-manager/settings/features') }}
        {{ hiddenInput('section', 'features') }}

        {{ forms.lightswitchField({
            label: 'Enable Prop Validation'|t('component-manager'),
            instructions: 'Validate component props based on their definitions'|t('component-manager'),
            id: 'enablePropValidation',
            name: 'settings[enablePropValidation]',
            on: settings.enablePropValidation,
            warning: settings.isOverriddenByConfig('enablePropValidation') ? 'This is being overridden by the `enablePropValidation` setting in the `config/component-manager.php` file.'|t('component-manager'),
            disabled: settings.isOverriddenByConfig('enablePropValidation'),
            errors: settings.getErrors('enablePropValidation')
        }) }}

        {{ forms.lightswitchField({
            label: 'Enable Cache'|t('component-manager'),
            instructions: 'Cache component discovery for better performance'|t('component-manager'),
            id: 'enableCache',
            name: 'settings[enableCache]',
            on: settings.enableCache,
            warning: settings.isOverriddenByConfig('enableCache') ? 'This is being overridden by the `enableCache` setting in the `config/component-manager.php` file.'|t('component-manager'),
            disabled: settings.isOverriddenByConfig('enableCache'),
            errors: settings.getErrors('enableCache')
        }) }}

        {{ forms.textField({
            label: 'Cache Duration'|t('component-manager'),
            instructions: 'How long to cache component data, in seconds (0 = until manually cleared)'|t('component-manager'),
            id: 'cacheDuration',
            name: 'settings[cacheDuration]',
            value: settings.cacheDuration,
            type: 'number',
            min: 0,
            warning: settings.isOverriddenByConfig('cacheDuration') ? 'This is being overridden by the `cacheDuration` setting in the `config/component-manager.php` file.'|t('component-manager'),
            disabled: settings.isOverriddenByConfig('cacheDuration'),
            errors: settings.getErrors('cacheDuration')
        }) }}

        {{ forms.lightswitchField({
            label: 'Enable Debug Mode'|t('component-manager'),
            instructions: 'Show helpful error messages in dev mode'|t('component-manager'),
            id: 'enableDebugMode',
            name: 'settings[enableDebugMode]',
            on: settings.enableDebugMode,
            warning: settings.isOverriddenByConfig('enableDebugMode') ? 'This is being overridden by the `enableDebugMode` setting in the `config/component-manager.php` file.'|t('component-manager'),
            disabled: settings.isOverriddenByConfig('enableDebugMode'),
            errors: settings.getErrors('enableDebugMode')
        }) }}

        {{ forms.lightswitchField({
            label: 'Enable Usage Tracking'|t('component-manager'),
            instructions: 'Track component usage statistics'|t('component-manager'),
            id: 'enableUsageTracking',
            name: 'settings[enableUsageTracking]',
            on: settings.enableUsageTracking,
            warning: settings.isOverriddenByConfig('enableUsageTracking') ? 'This is being overridden by the `enableUsageTracking` setting in the `config/component-manager.php` file.'|t('component-manager'),
            disabled: settings.isOverriddenByConfig('enableUsageTracking'),
            errors: settings.getErrors('enableUsageTracking')
        }) }}
        
        {{ forms.lightswitchField({
            label: 'Enable Inheritance'|t('component-manager'),
            instructions: 'Allow components to extend other components'|t('component-manager'),
            id: 'enableInheritance',
            name: 'settings[enableInheritance]',
            on: settings.enableInheritance,
            warning: settings.isOverriddenByConfig('enableInheritance') ? 'This is being overridden by the `enableInheritance` setting in the `config/component-manager.php` file.'|t('component-manager'),
            disabled: settings.isOverriddenByConfig('enableInheritance'),
            errors: settings.getErrors('enableInheritance')
        }) }}

        {{ forms.lightswitchField({
            label: 'Enable Documentation'|t('component-manager'),
            instructions: 'Enable automatic documentation generation for components'|t('component-manager'),
            id: 'enableDocumentation',
            name: 'settings[enableDocumentation]',
            on: settings.enableDocumentation,
            warning: settings.isOverriddenByConfig('enableDocumentation') ? 'This is being overridden by the `enableDocumentation` setting in the `config/component-manager.php` file.'|t('component-manager'),
            disabled: settings.isOverriddenByConfig('enableDocumentation'),
            errors: settings.getErrors('enableDocumentation')
        }) }}

        {{ forms.lightswitchField({
            label: 'Allow Inline Components'|t('component-manager'),
            instructions: 'Allow components to be defined inline in templates'|t('component-manager'),
            id: 'allowInlineComponents',
            name: 'settings[allowInlineComponents]',
            on: settings.allowInlineComponents,
            warning: settings.isOverriddenByConfig('allowInlineComponents') ? 'This is being overridden by the `allowInlineComponents` setting in the `config/component-manager.php` file.'|t('component-manager'),
            disabled: settings.isOverriddenByConfig('allowInlineComponents'),
            errors: settings.getErrors('allowInlineComponents')
        }) }}
    </form>

    {% include 'component-manager/_components/plugin-credit.twig' %}
{% endblock %}