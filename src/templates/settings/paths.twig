{% extends "component-manager/_layouts/settings" %}
{% set title = "Paths & Files"|t('component-manager') %}
{% set fullPageForm = true %}
{% set selectedSettingsItem = 'paths' %}

{% set crumbs = [
    {
        label: pluginName ?? 'Component Manager',
        url: url('component-manager'),
    },
    {
        label: 'Settings'|t('component-manager'),
        url: url('component-manager/settings'),
    },
    {
        label: 'Paths & Files'|t('component-manager'),
        url: url('component-manager/settings/paths'),
    },
] %}

{% import "_includes/forms" as forms %}

{% block content %}
    <h2>{{ 'Paths & Files'|t('component-manager') }}</h2>
    
    <form method="post" accept-charset="UTF-8">
        {{ csrfInput() }}
        {{ actionInput('component-manager/settings/save') }}
        {{ redirectInput('component-manager/settings/paths') }}
        {{ hiddenInput('section', 'paths') }}

        {{ forms.textareaField({
            label: 'Component Paths'|t('component-manager'),
            instructions: 'Paths to search for components (one per line, relative to templates folder)'|t('component-manager'),
            id: 'componentPaths',
            name: 'settings[componentPaths]',
            value: settings.componentPaths|join("\n"),
            rows: 4,
            placeholder: "_components\ncomponents\nsrc/components",
            warning: settings.isOverriddenByConfig('componentPaths') ? 'This is being overridden by the `componentPaths` setting in the `config/component-manager.php` file.'|t('component-manager'),
            disabled: settings.isOverriddenByConfig('componentPaths'),
            errors: settings.getErrors('componentPaths')
        }) }}

        {{ forms.autosuggestField({
            label: 'Default Path'|t('component-manager'),
            instructions: 'Default path for components (relative to templates folder)'|t('component-manager'),
            id: 'defaultPath',
            name: 'settings[defaultPath]',
            value: settings.defaultPath,
            placeholder: '_components',
            suggestEnvVars: true,
            suggestAliases: true,
            warning: settings.isOverriddenByConfig('defaultPath') ? 'This is being overridden by the `defaultPath` setting in the `config/component-manager.php` file.'|t('component-manager'),
            disabled: settings.isOverriddenByConfig('defaultPath'),
            errors: settings.getErrors('defaultPath')
        }) }}

        {{ forms.textField({
            label: 'Component Extension'|t('component-manager'),
            instructions: 'File extension for component files'|t('component-manager'),
            id: 'componentExtension',
            name: 'settings[componentExtension]',
            value: settings.componentExtension,
            placeholder: 'twig',
            warning: settings.isOverriddenByConfig('componentExtension') ? 'This is being overridden by the `componentExtension` setting in the `config/component-manager.php` file.'|t('component-manager'),
            disabled: settings.isOverriddenByConfig('componentExtension'),
            errors: settings.getErrors('componentExtension')
        }) }}
    </form>

    {% include 'component-manager/_components/plugin-credit.twig' %}
{% endblock %}